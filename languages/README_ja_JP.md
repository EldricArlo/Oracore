<div align="center">
  <img src="../src/media/icon-256.png" alt="Oracipher Icon" width="128">
  <h1 style="border-bottom: none;">Oracipher Core</h1>

# é«˜ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æš—å·åŒ–ã‚«ãƒ¼ãƒãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒ“ãƒ«ãƒ‰ | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ | è¨€èª | ä¾å­˜é–¢ä¿‚ |
| :---: | :---: | :---: | :---: |
| ![Build Status](https://img.shields.io/badge/build-passing-brightgreen) | ![License](https://img.shields.io/badge/license-Dual--Licensed-blue) | ![Language](https://img.shields.io/badge/language-C11-purple) | ![Libsodium](https://img.shields.io/badge/libsodium-v1.0.18+-brightgreen) ![OpenSSL](https://img.shields.io/badge/OpenSSL-v3.0+-0075A8) ![Libcurl](https://img.shields.io/badge/libcurl-v7.68+-E5522D) |

</div>

## 1. ğŸ˜ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ã‚¸ãƒ§ãƒ³ã¨åŸºæœ¬åŸå‰‡

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€C11æ¨™æº–ã§å®Ÿè£…ã•ã‚ŒãŸã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ç‰¹åŒ–ã—ãŸé«˜åº¦ãªãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æš—å·åŒ–ã‚«ãƒ¼ãƒãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚æ¥­ç•Œã‚’ãƒªãƒ¼ãƒ‰ã™ã‚‹æš—å·ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆ**libsodium**, **OpenSSL**, **libcurl**ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã€å …ç‰¢ã§ä¿¡é ¼æ€§ãŒé«˜ãã€ä½¿ã„ã‚„ã™ã„ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®æš—å·åŒ–ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã€å®Ÿè·µã§æ¤œè¨¼ã•ã‚ŒãŸé’å†™çœŸã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

ç§ãŸã¡ã®è¨­è¨ˆã¯ã€ä»¥ä¸‹ã®ä¸­å¿ƒçš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ã«å¾“ã£ã¦ã„ã¾ã™ï¼š

*   ğŸ¥¸ **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¸ˆã¿ã®ç¾ä»£æš—å·ã‚’é¸æŠï¼š** ç‹¬è‡ªã®æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã¾ã›ã‚“ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«èªã‚ã‚‰ã‚Œã€ã‚µã‚¤ãƒ‰ãƒãƒ£ãƒãƒ«æ”»æ’ƒã«è€æ€§ã®ã‚ã‚‹ç¾ä»£ã®æš—å·ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã®ã¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
*   ğŸ¤  **å¤šå±¤é˜²å¾¡ï¼š** ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å˜ä¸€ã®å±¤ã«ä¾å­˜ã•ã›ã¾ã›ã‚“ã€‚ãƒ¡ãƒ¢ãƒªç®¡ç†ã€APIè¨­è¨ˆã‹ã‚‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ•ãƒ­ãƒ¼ã«è‡³ã‚‹ã¾ã§ã€å„å±¤ã§é˜²å¾¡ã‚’å›ºã‚ã¾ã™ã€‚
*   ğŸ™ƒ **ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã€Œãƒ•ã‚§ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã€ï¼š** ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã¯å®‰å…¨ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ä¸ç¢ºå®ŸãªçŠ¶æ…‹ï¼ˆè¨¼æ˜æ›¸ã®å¤±åŠ¹çŠ¶æ…‹ãŒç¢ºèªã§ããªã„ãªã©ï¼‰ã«é­é‡ã—ãŸå ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã¯æ“ä½œã‚’ç¶šè¡Œã™ã‚‹ã®ã§ã¯ãªãã€å¤±æ•—ã‚’é¸æŠã—ã¦æ“ä½œã‚’çµ‚äº†ï¼ˆãƒ•ã‚§ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ï¼‰ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
*   ğŸ«¥ **æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®éœ²å‡ºã‚’æœ€å°åŒ–ï¼š** ç§˜å¯†éµãªã©ã®é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€ã‚¹ã‚³ãƒ¼ãƒ—ã€ãŠã‚ˆã³ãƒ¡ãƒ¢ãƒªæ»åœ¨æ™‚é–“ã¯ã€çµ¶å¯¾ã«å¿…è¦ãªæœ€å°é™ã®ç¯„å›²ã«å³æ ¼ã«åˆ¶å¾¡ã•ã‚Œãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

## 2. ğŸ¥² ä¸»ãªç‰¹å¾´

*   ğŸ˜® **å …ç‰¢ãªãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æš—å·ãƒ¢ãƒ‡ãƒ«:**
    *   **å…±é€šéµæš—å·ï¼š** å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ãƒ–ãƒ­ãƒƒã‚¯ã«ã¯ **XChaCha20-Poly1305** ãƒ™ãƒ¼ã‚¹ã®AEADã‚¹ãƒˆãƒªãƒ¼ãƒ æš—å·ã‚’æä¾›ã—ã€å°å®¹é‡ãƒ‡ãƒ¼ã‚¿ãƒ–ãƒ­ãƒƒã‚¯ã«ã¯ãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆAEADæš—å·ã‚’æä¾›ã—ã¾ã™ã€‚
    *   **å…¬é–‹éµæš—å·ï¼š** **X25519** (Curve25519ãƒ™ãƒ¼ã‚¹) ã‚’ä½¿ç”¨ã—ã¦å…±é€šã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’éµã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€æ„å›³ã—ãŸå—ä¿¡è€…ã®ã¿ãŒå¾©å·ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

*   ğŸ«¨ **ç¾ä»£çš„ãªæš—å·ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚¹ã‚¿ãƒƒã‚¯:**
    *   **éµå°å‡ºï¼š** ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®å‹è€…ã§ã‚ã‚‹ **Argon2id** ã‚’æ¡ç”¨ã—ã€GPUã‚„ASICã«ã‚ˆã‚‹ã‚¯ãƒ©ãƒƒã‚­ãƒ³ã‚°ã«åŠ¹æœçš„ã«å¯¾æŠ—ã—ã¾ã™ã€‚
    *   **ãƒ‡ã‚¸ã‚¿ãƒ«ç½²åï¼š** é«˜é€Ÿã‹ã¤é«˜ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãªãƒ‡ã‚¸ã‚¿ãƒ«ç½²åèƒ½åŠ›ã‚’æä¾›ã™ã‚‹ **Ed25519** ã‚’æ¡ç”¨ã—ã¾ã™ã€‚
    *   **éµã®çµ±ä¸€ï¼š** Ed25519éµãŒå®‰å…¨ã«X25519éµã«å¤‰æ›ã§ãã‚‹ç‰¹æ€§ã‚’å·§ã¿ã«åˆ©ç”¨ã—ã€ä¸€ã¤ã®ãƒã‚¹ã‚¿ãƒ¼ã‚­ãƒ¼ãƒšã‚¢ã§ç½²åã¨æš—å·åŒ–ã®ä¸¡æ–¹ã®ãƒ‹ãƒ¼ã‚ºã‚’æº€ãŸã—ã¾ã™ã€‚

*   ğŸ˜ **åŒ…æ‹¬çš„ãªå…¬é–‹éµåŸºç›¤ (PKI) ã‚µãƒãƒ¼ãƒˆ:**
    *   **è¨¼æ˜æ›¸ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ï¼š** X.509 v3æ¨™æº–ã«æº–æ‹ ã—ãŸè¨¼æ˜æ›¸ç½²åè¦æ±‚ (CSR) ã®ç”Ÿæˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
    *   **å³æ ¼ãªè¨¼æ˜æ›¸æ¤œè¨¼ï¼š** ä¿¡é ¼ãƒã‚§ãƒ¼ãƒ³ã€æœ‰åŠ¹æœŸé–“ã€ã‚µãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸€è‡´ã‚’å«ã‚€ã€æ¨™æº–åŒ–ã•ã‚ŒãŸè¨¼æ˜æ›¸æ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚
    *   **å¼·åˆ¶çš„ãªå¤±åŠ¹ãƒã‚§ãƒƒã‚¯ (OCSP):** å³æ ¼ãªã‚ªãƒ³ãƒ©ã‚¤ãƒ³è¨¼æ˜æ›¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ—ãƒ­ãƒˆã‚³ãƒ« (OCSP) ãƒã‚§ãƒƒã‚¯ã‚’å†…è”µã—ã€ã€Œãƒ•ã‚§ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã€ãƒãƒªã‚·ãƒ¼ã‚’æ¡ç”¨ã—ã¦ã€è¨¼æ˜æ›¸ã®è‰¯å¥½ãªçŠ¶æ…‹ãŒç¢ºèªã§ããªã„å ´åˆã¯å³åº§ã«æ“ä½œã‚’ä¸­æ­¢ã—ã¾ã™ã€‚

*   ğŸ§ **é‰„å£ã®ãƒ¡ãƒ¢ãƒªå®‰å…¨æ€§:**
    *   å…¬é–‹APIã‚’é€šã˜ã¦ `libsodium` ã®ã‚»ã‚­ãƒ¥ã‚¢ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã‚’æä¾›ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³éµãªã©ï¼‰ã‚’å®‰å…¨ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
    *   å†…éƒ¨ã®ã™ã¹ã¦ã®ç§˜å¯†éµã¯ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒ¡ãƒ¢ãƒªã«ä¿å­˜ã•ã‚Œã€**ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚¹ãƒ¯ãƒƒãƒ—ã•ã‚Œã‚‹ã®ã‚’é˜²ã**ã€è§£æ”¾å‰ã«å®‰å…¨ã«æ¶ˆå»ã•ã‚Œã¾ã™ã€‚

*   ğŸ˜µâ€ğŸ’« **é«˜å“è³ªãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°å®Ÿè·µ:**
    *   **æ˜ç¢ºãªAPIå¢ƒç•Œï¼š** çµ±ä¸€ã•ã‚ŒãŸå…¬é–‹ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ« `hsc_kernel.h` ã‚’æä¾›ã—ã€ä¸é€æ˜ãƒã‚¤ãƒ³ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã™ã¹ã¦ã®å†…éƒ¨å®Ÿè£…è©³ç´°ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€é«˜ã„å‡é›†åº¦ã¨ä½ã„çµåˆåº¦ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
    *   **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ¸ˆã¿ï¼š** ä¸­æ ¸ã¨ãªã‚‹æš—å·åŒ–ãŠã‚ˆã³PKIæ©Ÿèƒ½ã‚’ã‚«ãƒãƒ¼ã™ã‚‹ä¸€é€£ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å«ã¿ã€ã‚³ãƒ¼ãƒ‰ã®æ­£ç¢ºæ€§ã¨ä¿¡é ¼æ€§ã‚’ä¿è¨¼ã—ã¾ã™ã€‚
    *   **å……å®Ÿã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚µãƒ³ãƒ—ãƒ«ï¼š** è©³ç´°ãª `README.md` ã¨ã€ç›´æ¥å®Ÿè¡Œå¯èƒ½ãªãƒ‡ãƒ¢ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŠã‚ˆã³ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚

## 3. ğŸ¤“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€é–¢å¿ƒã®åˆ†é›¢ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€æ˜ç¢ºã§éšå±¤çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```
.
â”œâ”€â”€ include/
â”‚   â””â”€â”€ hsc_kernel.h      # [ã‚³ã‚¢] å”¯ä¸€ã®å…¬é–‹APIãƒ˜ãƒƒãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ src/                  # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ common/           # å…±é€šã®å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (ã‚»ã‚­ãƒ¥ã‚¢ãƒ¡ãƒ¢ãƒª, ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜)
â”‚   â”œâ”€â”€ core_crypto/      # ã‚³ã‚¢æš—å·åŒ–å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (libsodiumã®ãƒ©ãƒƒãƒ‘ãƒ¼)
â”‚   â”œâ”€â”€ pki/              # PKIå†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (OpenSSL, libcurlã®ãƒ©ãƒƒãƒ‘ãƒ¼)
â”‚   â”œâ”€â”€ hsc_kernel.c      # [ã‚³ã‚¢] å…¬é–‹APIã®å®Ÿè£…
â”‚   â”œâ”€â”€ main.c            # APIä½¿ç”¨ä¾‹ï¼šã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ•ãƒ­ãƒ¼ãƒ‡ãƒ¢ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
â”‚   â””â”€â”€ cli.c             # APIä½¿ç”¨ä¾‹ï¼šé«˜æ©Ÿèƒ½ãªã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ tests/                # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_*.c          # å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ test_helpers.h/.c # ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â”œâ”€â”€ Makefile              # ãƒ“ãƒ«ãƒ‰ãŠã‚ˆã³ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ README.md             # ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

## 4. ğŸ¤¥ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 4.1. ä¾å­˜ç’°å¢ƒ

*   **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«:** `make`
*   **Cã‚³ãƒ³ãƒ‘ã‚¤ãƒ©:** `gcc` ã¾ãŸã¯ `clang` (C11æ¨™æº–ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚‚ã®)
*   **libsodium:** (`libsodium-dev`)
*   **OpenSSL:** **v3.0** ä»¥ä¸Šã‚’æ¨å¥¨ (`libssl-dev`)
*   **libcurl:** (`libcurl4-openssl-dev`)

**Debian/Ubuntuã§ã®ãƒ¯ãƒ³ã‚­ãƒ¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:**
```bash
sudo apt-get update
sudo apt-get install build-essential libsodium-dev libssl-dev libcurl4-openssl-dev
```

### 4.2. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¨ãƒ†ã‚¹ãƒˆ

1.  **ã™ã¹ã¦ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ (ãƒ©ã‚¤ãƒ–ãƒ©ãƒª, ãƒ‡ãƒ¢, CLI, ãƒ†ã‚¹ãƒˆ) ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«:**
    ```bash
    make all
    ```

2.  **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ (é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—):**
    ```bash
    make run-tests
    ```
    > ğŸ˜ **OCSPãƒ†ã‚¹ãƒˆã®æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã«ã¤ã„ã¦ã®èª¬æ˜**
    >
    > `test_pki_verification` ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¸€ã¤ã¯ã€æ„å›³çš„ã«ç„¡åŠ¹ãªOCSPã‚µãƒ¼ãƒãƒ¼ã‚’æŒ‡ã™è¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã—ã¦æ¤œè¨¼ã‚’è¡Œã„ã¾ã™ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯å¿…ç„¶çš„ã«å¤±æ•—ã™ã‚‹ãŸã‚ã€`hsc_verify_user_certificate` é–¢æ•°ã¯å¤±åŠ¹çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ã®å¤±æ•—ã‚’ç¤ºã™ `-4` ã‚’è¿”ã™**å¿…è¦ãŒã‚ã‚Šã¾ã™**ã€‚ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ã€æˆ»ã‚Šå€¤ãŒå®Ÿéš›ã« `-4` ã§ã‚ã‚‹ã“ã¨ã‚’ã‚¢ã‚µãƒ¼ãƒˆã—ã€ã“ã‚Œã«ã‚ˆã‚Šç§ãŸã¡ã®ã€Œãƒ•ã‚§ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒæ­£å¸¸ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹ã“ã¨ã‚’è¨¼æ˜ã—ã¾ã™ã€‚

3.  **ãƒ‡ãƒ¢ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œ:**
    ```bash
    ./bin/hsc_demo
    ```

4.  **ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ:**
    ```bash
    ./bin/hsc_cli --help
    ```

5.  **ãƒ“ãƒ«ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—:**
    ```bash
    make clean
    ```

## 5. â˜ºï¸ ä½¿ç”¨ã‚¬ã‚¤ãƒ‰

### 5.1. ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ (`hsc_cli`)

`hsc_cli` ã¯ã€**æŸ”è»Ÿãªå¼•æ•°é †åºã‚’ã‚µãƒãƒ¼ãƒˆ**ã™ã‚‹ãƒ•ãƒ«æ©Ÿèƒ½ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã€ã™ã¹ã¦ã®ã‚³ã‚¢æš—å·åŒ–ãŠã‚ˆã³PKIæ“ä½œã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

**å®Œå…¨ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹ï¼šã‚¢ãƒªã‚¹ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚’æš—å·åŒ–ã—ã€ãƒœãƒ–ã«å®‰å…¨ã«é€ä¿¡ã™ã‚‹**

1.  **ğŸ˜’ (ä¸¡è€…) ãƒã‚¹ã‚¿ãƒ¼ã‚­ãƒ¼ãƒšã‚¢ã‚’ç”Ÿæˆ:**
    ```bash
    ./bin/hsc_cli gen-keypair alice
    ./bin/hsc_cli gen-keypair bob
    ```

2.  **â˜ºï¸ (ä¸¡è€…) CSRã‚’ç”Ÿæˆã—ã€è¨¼æ˜æ›¸ã‚’å–å¾—:** (ã“ã“ã§ã¯CAãŒ `alice.pem` ã¨ `bob.pem` ã‚’ç™ºè¡Œæ¸ˆã¿ã¨ä»®å®š)
    ```bash
    ./bin/hsc_cli gen-csr alice.key "alice@example.com"
    # (alice.csr ã‚’CAã«é€ã‚Šã€alice.pem ã‚’å–å¾—)
    ```

3.  **ğŸ¤¨ (ã‚¢ãƒªã‚¹) ãƒœãƒ–ã®è¨¼æ˜æ›¸ã‚’æ¤œè¨¼:** ( `ca.pem` ãŒä¿¡é ¼ã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆCAè¨¼æ˜æ›¸ã§ã‚ã‚‹ã¨ä»®å®š)
    ```bash
    ./bin/hsc_cli verify-cert bob.pem --ca ca.pem --user "bob@example.com"
    ```
    > **ãƒ’ãƒ³ãƒˆ:** å€¤ã‚’æŒã¤ã‚ªãƒ—ã‚·ãƒ§ãƒ³ (`--ca` ã‚„ `--user` ãªã©) ã¯ã€ä»»æ„ã®é †åºã§ãƒªã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

4.  **ğŸ˜‘ (ã‚¢ãƒªã‚¹) ãƒœãƒ–å®›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æš—å·åŒ–:**
    ```bash
    echo "This is top secret information." > secret.txt
    ./bin/hsc_cli encrypt secret.txt --to bob.pem --from alice.key
    ```
    ã“ã‚Œã§ã‚¢ãƒªã‚¹ã¯ `secret.hsc` ã¨è‡ªèº«ã®è¨¼æ˜æ›¸ `alice.pem` ã‚’ãƒœãƒ–ã«é€ä¿¡ã§ãã¾ã™ã€‚

5.  **ğŸ˜‰ (ãƒœãƒ–) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å—ã‘å–ã£ã¦å¾©å·:**
    ```bash
    # ãƒœãƒ–ã¯ --from ã¨ --to ã®é †åºã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã“ã¨ã‚‚ã§ãã¾ã™
    ./bin/hsc_cli decrypt secret.hsc --to bob.key --from alice.pem
    cat secret.decrypted
    ```

### 5.2. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ±åˆ

`src/main.c` ã¯çµ±åˆã®ãŸã‚ã®å„ªã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚ä»¥ä¸‹ã¯å…¸å‹çš„ãªAPIå‘¼ã³å‡ºã—ãƒ•ãƒ­ãƒ¼ã§ã™ï¼š

1.  **ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆæœŸåŒ–:** ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®èµ·å‹•æ™‚ã« `hsc_init()` ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
    ```c
    #include "hsc_kernel.h"
    
    int main() {
        if (hsc_init() != 0) {
            // è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†
        }
        // ... ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ ...
        hsc_cleanup();
        return 0;
    }
    ```

2.  **é€ä¿¡è€… (ã‚¢ãƒªã‚¹) ãŒãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–:**
    ```c
    // 1. ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’ç”Ÿæˆ
    unsigned char session_key[HSC_SESSION_KEY_BYTES];
    randombytes_buf(session_key, sizeof(session_key));

    // 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’ä½¿ç”¨ã—ã¦AEADã§ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ– (å°ãƒ‡ãƒ¼ã‚¿å‘ã‘)
    const char* message = "Secret message";
    size_t enc_buf_size = strlen(message) + HSC_AEAD_NONCE_BYTES + HSC_AEAD_TAG_BYTES;
    unsigned char* encrypted_data = malloc(enc_buf_size);
    unsigned long long encrypted_data_len;
    hsc_aead_encrypt(encrypted_data, &encrypted_data_len, 
                     (const unsigned char*)message, strlen(message), session_key);

    // 3. å—ä¿¡è€… (ãƒœãƒ–) ã®è¨¼æ˜æ›¸ã‚’æ¤œè¨¼
    if (hsc_verify_user_certificate(bob_cert_pem, ca_pem, "bob@example.com") != 0) {
        // è¨¼æ˜æ›¸ãŒç„¡åŠ¹ã§ã™ã€‚ä¸­æ­¢ï¼
    }

    // 4. ãƒœãƒ–ã®è¨¼æ˜æ›¸ã‹ã‚‰å…¬é–‹éµã‚’æŠ½å‡º
    unsigned char bob_pk[HSC_MASTER_PUBLIC_KEY_BYTES];
    hsc_extract_public_key_from_cert(bob_cert_pem, bob_pk);

    // 5. ãƒœãƒ–ã®å…¬é–‹éµã¨ã‚¢ãƒªã‚¹ã®ç§˜å¯†éµã‚’ä½¿ç”¨ã—ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–
    // (alice_kp ã¯ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã® hsc_master_key_pair* ã¨ä»®å®š)
    unsigned char encapsulated_key[...]; size_t encapsulated_key_len;
    hsc_encapsulate_session_key(encapsulated_key, &encapsulated_key_len, 
                                session_key, sizeof(session_key),
                                bob_pk, alice_kp);
    
    // 6. encrypted_data ã¨ encapsulated_key ã‚’ãƒœãƒ–ã«é€ä¿¡
    ```

3.  **å—ä¿¡è€… (ãƒœãƒ–) ãŒãƒ‡ãƒ¼ã‚¿ã‚’å¾©å·:**
    ```c
    // 1. é€ä¿¡è€… (ã‚¢ãƒªã‚¹) ã®è¨¼æ˜æ›¸ã‹ã‚‰å…¬é–‹éµã‚’æŠ½å‡º
    unsigned char alice_pk[HSC_MASTER_PUBLIC_KEY_BYTES];
    hsc_extract_public_key_from_cert(alice_cert_pem, alice_pk);
    
    // 2. ã‚¢ãƒªã‚¹ã®å…¬é–‹éµã¨ãƒœãƒ–è‡ªèº«ã®ç§˜å¯†éµã‚’ä½¿ç”¨ã—ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’ãƒ‡ã‚«ãƒ—ã‚»ãƒ«åŒ–
    // (bob_kp ã¯ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã® hsc_master_key_pair* ã¨ä»®å®š)
    unsigned char* dec_session_key = hsc_secure_alloc(HSC_SESSION_KEY_BYTES);
    if (hsc_decapsulate_session_key(dec_session_key, encapsulated_key, enc_key_len,
                                    alice_pk, bob_kp) != 0) {
        // ãƒ‡ã‚«ãƒ—ã‚»ãƒ«åŒ–ã«å¤±æ•—ï¼
    }

    // 3. å›å¾©ã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å·
    unsigned char final_message[...]; unsigned long long final_len;
    if (hsc_aead_decrypt(final_message, &final_len,
                         encrypted_data, encrypted_data_len, dec_session_key) != 0) {
        // å¾©å·ã«å¤±æ•—ï¼ãƒ‡ãƒ¼ã‚¿ãŒæ”¹ã–ã‚“ã•ã‚Œã¦ã„ã¾ã™
    }

    // 4. ä½¿ç”¨å¾Œã€ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’å®‰å…¨ã«è§£æ”¾
    hsc_secure_free(dec_session_key);
    ```

## 6. ğŸ˜¶ æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è©³ç´°è§£èª¬

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­æ ¸ã¯ã€å…¬é–‹éµæš—å·ã¨å…±é€šéµæš—å·ã®åˆ©ç‚¹ã‚’çµ„ã¿åˆã‚ã›ã€å®‰å…¨ã‹ã¤åŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’å®Ÿç¾ã™ã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æš—å·ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨éµã®é–¢ä¿‚å›³:**

```
SENDER (ALICE)                                           RECIPIENT (BOB)
========================================================================
[ å…ƒãƒ‡ãƒ¼ã‚¿ ] -> ç”Ÿæˆ [ã‚»ãƒƒã‚·ãƒ§ãƒ³éµ]
                  |          |
(å…±é€šéµæš—å·) <-----'          '-> (å…¬é–‹éµã‚«ãƒ—ã‚»ãƒ«åŒ–) ä½¿ç”¨: ãƒœãƒ–ã®å…¬é–‹éµ, ã‚¢ãƒªã‚¹ã®ç§˜å¯†éµ
     |                                |
[æš—å·åŒ–ãƒ‡ãƒ¼ã‚¿]                     [ã‚«ãƒ—ã‚»ãƒ«åŒ–ã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³éµ]
     |                                |
     '----------------. .-------------'
                      | |
                      v v
                  [ è»¢é€ãƒ‘ã‚±ãƒƒãƒˆ ]
                       |
   ==================> | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€ =================>
                       |
                  [ è»¢é€ãƒ‘ã‚±ãƒƒãƒˆ ]
                      | |
           .----------' '-------------.
           |                          |
[ã‚«ãƒ—ã‚»ãƒ«åŒ–ã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³éµ]       [æš—å·åŒ–ãƒ‡ãƒ¼ã‚¿]
           |                          |
           v                          |
(å…¬é–‹éµãƒ‡ã‚«ãƒ—ã‚»ãƒ«åŒ–) ä½¿ç”¨: ãƒœãƒ–ã®ç§˜å¯†éµ, ã‚¢ãƒªã‚¹ã®å…¬é–‹éµ |
           |                          |
           v                          |
      [å›å¾©ã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³éµ] <--------$----' (å…±é€šéµå¾©å·)
           |
           v
      [ å…ƒãƒ‡ãƒ¼ã‚¿ ]
```

## 7. ğŸ˜„ é«˜åº¦ãªè¨­å®šï¼šç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€å°†æ¥ã®ã‚ˆã‚Šå¼·åŠ›ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç’°å¢ƒå¤‰æ•°ã‚’é€šã˜ã¦éµå°å‡ºé–¢æ•° (Argon2id) ã®è¨ˆç®—å¼·åº¦ã‚’**å‘ä¸Šã•ã›ã‚‹**ã“ã¨ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

*   **`HSC_ARGON2_OPSLIMIT`**: Argon2idã®æ“ä½œï¼ˆè¨ˆç®—ï¼‰å›æ•°ã‚’è¨­å®šã—ã¾ã™ã€‚
*   **`HSC_ARGON2_MEMLIMIT`**: Argon2idã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆãƒã‚¤ãƒˆå˜ä½ï¼‰ã‚’è¨­å®šã—ã¾ã™ã€‚

**é‡è¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ï¼š** ã“ã®æ©Ÿèƒ½ã¯**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã®ã¿ä½¿ç”¨ã§ãã¾ã™**ã€‚è¨­å®šã•ã‚ŒãŸç’°å¢ƒå¤‰æ•°ã®å€¤ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ„ã¿è¾¼ã¾ã‚ŒãŸæœ€å°ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚ˆã‚Šã‚‚ä½ã„å ´åˆã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã“ã‚Œã‚‰ã®å®‰å…¨ã§ãªã„å€¤ã‚’è‡ªå‹•çš„ã«ç„¡è¦–ã—ã€çµ„ã¿è¾¼ã¿ã®æœ€å°å€¤ã‚’å¼·åˆ¶çš„ã«ä½¿ç”¨ã—ã¾ã™ã€‚

** æ–°ã—ã„ä½¿ç”¨ä¾‹:**

```bash
# ä¾‹ï¼šæ“ä½œåˆ¶é™ã‚’10ã«ã€ãƒ¡ãƒ¢ãƒªåˆ¶é™ã‚’512MBã«å¼•ãä¸Šã’ã‚‹ã€‚
# æ³¨æ„ï¼šHSC_ARGON2_MEMLIMIT ã¯ãƒã‚¤ãƒˆå˜ä½ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
# 512 * 1024 * 1024 = 536870912 ãƒã‚¤ãƒˆã€‚
export HSC_ARGON2_OPSLIMIT=10
export HSC_ARGON2_MEMLIMIT=536870912

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãŸã‚·ã‚§ãƒ«ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã“ã‚Œã‚‰ã®ã‚ˆã‚Šå¼·åŠ›ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
./bin/hsc_cli gen-keypair my_strong_key
```

## 8. ğŸ˜€ APIã‚³ã‚¢ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ (`include/hsc_kernel.h`)

### åˆæœŸåŒ–ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `int hsc_init()` | **(æœ€åˆã«å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™)** ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå…¨ä½“ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚ |
| `void hsc_cleanup()` | ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†å‰ã«å‘¼ã³å‡ºã—ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒªã‚½ãƒ¼ã‚¹ã‚’è§£æ”¾ã—ã¾ã™ã€‚ |

### éµç®¡ç†
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `hsc_master_key_pair* hsc_generate_master_key_pair()` | æ–°ã—ã„ãƒã‚¹ã‚¿ãƒ¼ã‚­ãƒ¼ãƒšã‚¢ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ |
| `hsc_master_key_pair* hsc_load_master_key_pair_from_private_key(...)` | ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç§˜å¯†éµã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ |
| `int hsc_save_master_key_pair(...)` | ã‚­ãƒ¼ãƒšã‚¢ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚ |
| `void hsc_free_master_key_pair(hsc_master_key_pair** kp)` | ãƒã‚¹ã‚¿ãƒ¼ã‚­ãƒ¼ãƒšã‚¢ã‚’å®‰å…¨ã«è§£æ”¾ã—ã¾ã™ã€‚ |

### PKIã¨è¨¼æ˜æ›¸
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `int hsc_generate_csr(...)` | PEMå½¢å¼ã®è¨¼æ˜æ›¸ç½²åè¦æ±‚ (CSR) ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ |
| `int hsc_verify_user_certificate(...)` | **(ã‚³ã‚¢)** å®Œå…¨ãªè¨¼æ˜æ›¸æ¤œè¨¼ (ç½²åãƒã‚§ãƒ¼ãƒ³, æœ‰åŠ¹æœŸé–“, ã‚µãƒ–ã‚¸ã‚§ã‚¯ãƒˆ, OCSP) ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ |
| `int hsc_extract_public_key_from_cert(...)` | æ¤œè¨¼æ¸ˆã¿ã®è¨¼æ˜æ›¸ã‹ã‚‰å…¬é–‹éµã‚’æŠ½å‡ºã—ã¾ã™ã€‚ |

### éµã‚«ãƒ—ã‚»ãƒ«åŒ– (å…¬é–‹éµ)
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `int hsc_encapsulate_session_key(...)` | å—ä¿¡è€…ã®å…¬é–‹éµã‚’ä½¿ç”¨ã—ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’æš—å·åŒ–ã—ã¾ã™ã€‚ |
| `int hsc_decapsulate_session_key(...)` | å—ä¿¡è€…ã®ç§˜å¯†éµã‚’ä½¿ç”¨ã—ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³éµã‚’å¾©å·ã—ã¾ã™ã€‚ |

### ãƒ‡ãƒ¼ã‚¿æš—å·åŒ– (å…±é€šéµ)
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `int hsc_aead_encrypt(...)` | AEADã‚’ä½¿ç”¨ã—ã¦**å°ãƒ‡ãƒ¼ã‚¿ãƒ–ãƒ­ãƒƒã‚¯**ã‚’èªè¨¼ä»˜ãæš—å·åŒ–ã—ã¾ã™ã€‚ |
| `int hsc_aead_decrypt(...)` | `hsc_aead_encrypt` ã§æš—å·åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å¾©å·ã—æ¤œè¨¼ã—ã¾ã™ã€‚ |

### ã‚¹ãƒˆãƒªãƒ¼ãƒ æš—å·åŒ– (å…±é€šéµã€å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«å‘ã‘)
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `hsc_crypto_stream_state* hsc_crypto_stream_state_new_push(...)` | æš—å·åŒ–ã‚¹ãƒˆãƒªãƒ¼ãƒ çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ |
| `hsc_crypto_stream_state* hsc_crypto_stream_state_new_pull(...)` | å¾©å·ã‚¹ãƒˆãƒªãƒ¼ãƒ çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ |
| `int hsc_crypto_stream_push(...)` | ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä¸€ã¤æš—å·åŒ–ã—ã¾ã™ã€‚ |
| `int hsc_crypto_stream_pull(...)` | ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä¸€ã¤å¾©å·ã—ã¾ã™ã€‚ |
| `void hsc_crypto_stream_state_free(hsc_crypto_stream_state** state)` | ã‚¹ãƒˆãƒªãƒ¼ãƒ çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è§£æ”¾ã—ã¾ã™ã€‚ |

### ã‚»ã‚­ãƒ¥ã‚¢ãƒ¡ãƒ¢ãƒª
| é–¢æ•° | èª¬æ˜ |
| :--- | :--- |
| `void* hsc_secure_alloc(size_t size)` | ä¿è­·ã•ã‚Œã€ã‚¹ãƒ¯ãƒƒãƒ—ä¸å¯èƒ½ãªãƒ¡ãƒ¢ãƒªãƒ–ãƒ­ãƒƒã‚¯ã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ |
| `void hsc_secure_free(void* ptr)` | ä¿è­·ã•ã‚ŒãŸãƒ¡ãƒ¢ãƒªã‚’å®‰å…¨ã«æ¶ˆå»ã—ã€è§£æ”¾ã—ã¾ã™ã€‚ |


## 9. ğŸ¥³ è²¢çŒ®

ã‚ã‚‰ã‚†ã‚‹å½¢å¼ã®è²¢çŒ®ã‚’æ­“è¿ã—ã¾ã™ï¼ãƒã‚°ã®ç™ºè¦‹ã€æ©Ÿèƒ½ææ¡ˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ”¹å–„ãªã©ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«Pull Requestã‚’é€ä¿¡ã™ã‚‹ã‹ã€Issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

## 10. ğŸ¥º è¨¼æ˜æ›¸ã®èª¬æ˜ (Certificate Description)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**X.509 v3** è¨¼æ˜æ›¸ä½“ç³»ã‚’æ¡ç”¨ã—ã¦ã€å…¬é–‹éµã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆä¾‹: `alice@example.com`ï¼‰ã«çµã³ã¤ã‘ã€ä¿¡é ¼ã‚’ç¢ºç«‹ã—ã¾ã™ã€‚è¨¼æ˜æ›¸ã®æ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã«ã¯ã€**ç½²åãƒã‚§ãƒ¼ãƒ³ã®æ¤œè¨¼**ã€**æœ‰åŠ¹æœŸé–“ã®ãƒã‚§ãƒƒã‚¯**ã€**ã‚µãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDã®ç…§åˆ**ã€ãŠã‚ˆã³**å¤±åŠ¹çŠ¶æ…‹ã®ãƒã‚§ãƒƒã‚¯ (OCSP)** ãŒå«ã¾ã‚Œã€å³æ ¼ãªã€Œãƒ•ã‚§ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã€ãƒãƒªã‚·ãƒ¼ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

## 11. ğŸ¥¸ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ (License) - ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ¢ãƒ‡ãƒ«

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯**ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ (Dual-License)** ãƒ¢ãƒ‡ãƒ«ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š

### 1. GNU Affero General Public License v3.0 (AGPLv3)
ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€å­¦è¡“ç ”ç©¶ã€å€‹äººå­¦ç¿’ã«é©ã—ã¦ã„ã¾ã™ã€‚å¤‰æ›´ã•ã‚ŒãŸã€ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æä¾›ã•ã‚Œã‚‹æ´¾ç”Ÿç‰©ã‚‚ã€ãã®å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’AGPLv3ã§å…¬é–‹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### 2. å•†ç”¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ (Commercial License)
ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ã‚½ãƒ¼ã‚¹ã®å•†ç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€è£½å“ã€ã¾ãŸã¯ã‚µãƒ¼ãƒ“ã‚¹ã«é©ã—ã¦ã„ã¾ã™ã€‚AGPLv3ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹æ¡é …ã«æ‹˜æŸã•ã‚ŒãŸããªã„å ´åˆã¯ã€å•†ç”¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**å•†ç”¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®å–å¾—ã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„: `eldric502lol@gmail.com`**